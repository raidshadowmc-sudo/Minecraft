# 🏆 Система автоматических ролей Discord - Elite Squad

## ✨ Новые возможности

Discord бот теперь автоматически проверяет статистику игроков в Bedwars и выдает соответствующие роли на основе их достижений.

### 🎯 Новые команды

#### `/check_stats <nickname>`
Проверяет статистику игрока и показывает:
- Текущие показатели (KDR, убийства, кровати, уровень)
- Клановую роль, которую игрок заслужил
- Прогресс до следующей роли
- Престижные роли (если есть)

**Пример использования:**
```
/check_stats ElitePlayer123
```

#### `/update_roles <nickname> [force]`
**Только для администраторов!**

Автоматически обновляет роли игрока согласно его статистике:
- Удаляет старые клановые роли
- Выдает новую клановую роль по статистике
- Добавляет престижные роли
- Параметр `force=True` позволяет обновить данные даже если Discord участник не найден

**Пример использования:**
```
/update_roles ElitePlayer123
/update_roles ElitePlayer123 force:True
```

## 🏯 Клановые роли (основаны на статистике Bedwars)

Роли выдаются автоматически на основе комбинации:
- **KDR** (соотношение убийств к смертям)
- **Количество убийств**
- **Количество разрушенных кроватей**

### 📊 Иерархия ролей (от низшей к высшей):

| Роль | KDR | Убийства | Кровати | Discord роль |
|------|-----|----------|---------|--------------|
| Umi | 2.38+ | 500+ | 200+ | 《FR》🇯🇵Umi 軍隊🍙 |
| Asigaro | 2.34+ | 1000+ | 400+ | 《FR》🇯🇵Asigaro 軍隊🍙 |
| Yakuin | 2.2+ | 1500+ | 600+ | 《FR》🇯🇵Yakuin 軍隊🍙 |
| Ronin | 2.1+ | 2000+ | 800+ | 《FR》🇯🇵Ronin 軍隊🍙 |
| Samurai | 2.07+ | 4000+ | 1200+ | 《FR》🇯🇵Samurai 軍隊🀄 |
| Kirito | 2.0+ | 5000+ | 1500+ | 《FR》🇯🇵Kirito 軍隊🀄 |
| ... | ... | ... | ... | ... |
| Tenno | 1.42+ | 18200+ | 4990+ | 《FR》🇯🇵Tenno 将軍💯 |
| ... | ... | ... | ... | ... |
| Hattori | 0.57+ | 100000+ | 50000+ | 《FR》🇯🇵HATTORI 将軍🐱‍👤 |

## ⭐ Престижные роли

### Автоматические престижные роли:
- **«🗡» Потрашитель** - 40,000+ убийств в любом режиме

### Ручные престижные роли (выдаются администраторами):
- **«💦» Истинная Единица** - активные участники с 8 августа 2021 г.
- **«💎» Неогранённый Алмаз** - особое признание от администрации
- **«🗻» Несокрушимый** - финальный килл с 1.5 сердечка или ниже
- **«👟» Техно-Денсер** - постройка 32 блоков мунволком
- **«⚔» 𝙼𝙾𝙽𝚂𝚃𝙰 𝚇** - 120 убийств за игру
- **«🗿» Без рассудка** - 15 побед подряд без изумрудов
- **«⛑» Страйкер** - победа только с фаерболлами

## 🔄 Автоматическое обновление

Система автоматически обновляет роли **каждые 6 часов**:
- Проверяет топ-50 игроков по опыту
- Находит соответствующих участников Discord
- Обновляет роли согласно актуальной статистике
- Логирует все изменения в консоль

## 🎮 Интеграция с существующими командами

Все существующие команды бота продолжают работать:
- `/ascend` - ASCEND карточки игроков
- `/karma` - система кармы
- `/shop`, `/buy`, `/inventory` - магазин и инвентарь
- `/embed` - создание красивых сообщений

## 🔧 Техническая информация

### Как работает система:
1. Бот получает данные игрока через API сайта
2. Анализирует статистику (KDR, убийства, кровати)
3. Определяет подходящую роль по таблице требований
4. Проверяет наличие Discord участника на сервере
5. Удаляет старые клановые роли и выдает новые

### Безопасность:
- Команда `/update_roles` доступна только администраторам
- Система работает только с участниками на сервере
- Автоматические логи всех операций
- Защита от дублирования ролей

### Производительность:
- Умная система кеширования запросов
- Пакетная обработка участников
- Минимальные API вызовы к Discord
- Обработка ошибок и таймаутов

## 🚀 Готово к использованию!

Система ролей полностью интегрирована и готова к работе. Все игроки Elite Squad теперь могут получать роли автоматически на основе своих достижений в игре!

---

**Разработано для Elite Squad** 🎮